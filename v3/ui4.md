# 대장간 V3 - UI/UX 설계 문서 v4

## 개요

- **프로젝트**: 대장간 V3 (목재 재단 최적화 앱)
- **타겟**: B2B - 목공소/인테리어 현장 전문가
- **플랫폼**: 모바일 웹 (반응형)
- **버전**: v4

---

## 전체 흐름

```
Step 1: 원판 설정 → Step 2: 부품 입력 → Step 3: 결과 → PDF 보기
```

---

## Step 1: 원판 설정

### 화면 구성

```
┌─────────────────────────────────┐
│  [대장간 V3]    설정 · 입력 · 결과  │
├─────────────────────────────────┤
│                                 │
│         원판 크기               │
│   재단할 원판 사이즈를 입력하세요  │
│                                 │
│  ┌──────┐     ┌──────┐         │
│  │ 2440 │  ×  │ 1220 │         │
│  │  mm  │     │  mm  │         │
│  └──────┘     └──────┘         │
│    가로         세로            │
│                                 │
│  ┌─────────────────────────┐   │
│  │ 🌾 결고려                │   │
│  │    나무결 방향 맞춰 배치  │ □ │
│  └─────────────────────────┘   │
│                                 │
│      [원판 프리뷰 이미지]        │
│                                 │
│       [다음: 부품 입력 →]       │
│                                 │
└─────────────────────────────────┘
```

### 입력 요소

| 요소 | 기본값 | 설명 |
|------|--------|------|
| 가로 | 2440mm | 터치 시 키패드 |
| 세로 | 1220mm | 터치 시 키패드 |
| 결고려 | OFF | 체크박스 토글 |

### 제거된 항목

- ~~톱날 사이즈~~
- ~~나무 두께~~

---

## Step 2: 부품 입력

### 기본 화면 (키패드 닫힘)

```
┌─────────────────────────────────┐
│  [대장간 V3]    설정 · 입력 · 결과  │
├─────────────────────────────────┤
│                                 │
│  부품 목록 (7개)        전체삭제 │
│  ┌─────────────────────────┐   │
│  │ 800×400      ×4    ← 삭제│   │
│  │ 600×300      ×2    ← 삭제│   │
│  │ 1000×500     ×1    ← 삭제│   │
│  │                         │   │
│  │      (넓은 공간)        │   │
│  │                         │   │
│  └─────────────────────────┘   │
│                                 │
│          [최적화 실행]          │
├─────────────────────────────────┤
│  ┌────┐ ┌────┐ ┌────┐ ┌──┐     │
│  │800 │×│400 │×│ 4  │ │≡≡│[+추가]│
│  │ mm │ │ mm │ │ 개 │ │  │     │
│  └────┘ └────┘ └────┘ └──┘     │
│   가로    세로   개수  결고려    │
└─────────────────────────────────┘
```

### 공간 배분

| 영역 | 비율 |
|------|------|
| 헤더 | 8% |
| 부품 리스트 | 55% |
| 최적화 버튼 | 7% |
| 하단 입력바 | 12% |
| 키패드 (필요시) | 40% |

### 하단 입력바

```
┌──────────────────────────────────────────────────┐
│  ┌──────┐   ┌──────┐   ┌──────┐   ┌────┐        │
│  │      │   │      │   │      │   │    │        │
│  │ 800  │ × │ 400  │ × │  4   │   │ ≡≡ │ [+추가]│
│  │  mm  │   │  mm  │   │  개  │   │    │        │
│  └──────┘   └──────┘   └──────┘   └────┘        │
│    터치       터치        터치      터치         │
│   키패드     키패드      키패드    토글          │
└──────────────────────────────────────────────────┘
```

| 요소 | 입력 방식 |
|------|----------|
| 가로 | 터치 → 키패드 |
| 세로 | 터치 → 키패드 |
| 개수 | 터치 → 키패드 |
| 결고려 | 이미지 터치 토글 |

### 입력 자동 흐름

```
가로 터치 → 입력 → ✓ → 세로로 자동 전환 → 입력 → ✓ → 개수로 자동 전환 → 입력 → ✓ → 키패드 닫힘
```

| 단계 | 동작 | 결과 |
|------|------|------|
| 1 | 가로 터치 | 키패드 열림, "가로" 표시 |
| 2 | 숫자 입력 후 ✓ | 세로로 자동 전환 |
| 3 | 숫자 입력 후 ✓ | 개수로 자동 전환 |
| 4 | 숫자 입력 후 ✓ | 키패드 닫힘 |
| 5 | 결고려 터치 | ON/OFF 토글 (선택) |
| 6 | [+추가] | 리스트에 추가 |

### 키패드 스펙

| 항목 | 내용 |
|------|------|
| 그리드 | 3×4 (12키) |
| 키 | 1~9, 0, ←(백스페이스), ✓(확인) |
| 제거 | ~~+50, +100, 00, C, +/-~~ |
| 높이 | 화면의 약 40% |

---

## Step 3: 결과

### 화면 구성

```
┌─────────────────────────────────┐
│  대장간 V3        설정·입력·결과 │
├─────────────────────────────────┤
│  💰 16,500원 │ ✂️ 11회 │ 📦 2장 │
├─────────────────────────────────┤
│            2400 mm             │
│  ┌─────────────────────────┐   │
│  │                         │   │
│  │                         │   │
│  │                         │   │
│  │     [배치도 최대화]      │   │
│  │                         │   │
│  │                         │   │
│  │                         │   │
│  └─────────────────────────┘   │
│ 1220 mm                        │
│         ◀  1 / 2  ▶           │
├─────────────────────────────────┤
│ [← 다시입력] [📤 공유] [📄 PDF] │
└─────────────────────────────────┘
```

### v4 변경 사항 (결과 화면)

| 항목 | v3 | v4 |
|------|----|----|
| "2400×1220 mm" 텍스트 | 요약바로 이동 | **완전 삭제** |
| 효율 % | 요약바로 이동 | **완전 삭제** |
| 배치도 옆 치수 | 유지 | **유지** |
| 요약바 | 확장 | **기존 유지** |
| 배치도 | 최대화 | **최대화** |

### 요약바

```
💰 16,500원 │ ✂️ 11회 │ 📦 2장
```

| 항목 | 표시 |
|------|------|
| 예상 비용 | 💰 16,500원 |
| 절단 횟수 | ✂️ 11회 |
| 사용 원판 | 📦 2장 |

### 삭제된 항목

- ~~"2400 × 1220 mm" 텍스트~~ (배치도 위)
- ~~"57.4%" 효율~~ (배치도 아래)

### 유지된 항목

- 배치도 옆 치수 표시 (2400 mm, 1220 mm)
- 페이지 네비게이션 (◀ 1/2 ▶)

### 버튼 동작

| 버튼 | 동작 |
|------|------|
| ← 다시입력 | Step 2로 이동 (입력 데이터 유지) |
| 📤 공유 | 텍스트 내용 + 전체 PDF 첨부 공유 |
| 📄 PDF | PDF 미리보기 화면 열림 |

---

## 배치도 숫자 표시 (하이브리드 방식)

### 규칙

| 조각 크기 | 표시 방식 |
|----------|----------|
| ≥ 200×200 | 사이즈 직접 표시 (예: 800×400) |
| < 200×200 | 번호로 표시 (예: ①) + 범례 |

### 예시

```
┌─────────────────────────────────┐
│ ┌───┬───┬───┬───┬───┐         │
│ │ ① │ ① │ ① │ ① │ ① │         │  ← 작아서 번호만
│ └───┴───┴───┴───┴───┘         │
│                                 │
│ ┌───────────┐ ┌───────────┐   │
│ │           │ │           │   │
│ │  400×300  │ │  400×300  │   │  ← 크니까 직접 표시
│ │           │ │           │   │
│ └───────────┘ └───────────┘   │
│                                 │
│ ┌─────────────────────────────┐│
│ │          800×400            ││  ← 크니까 직접 표시
│ └─────────────────────────────┘│
└─────────────────────────────────┘

[범례 - 작은 조각만]
① 100×100  ×10개
```

---

## 줌 기능

### 화면별 줌 지원

| 화면 | 핀치 줌 | 줌 버튼 |
|------|--------|--------|
| 결과 화면 (배치도) | ✅ | ❌ |
| PDF 미리보기 | ✅ | ❌ |

### 제스처

| 동작 | 결과 |
|------|------|
| 핀치 아웃 (두 손가락 벌림) | 확대 |
| 핀치 인 (두 손가락 모음) | 축소 |
| 더블 탭 | 100% ↔ 맞춤 토글 |
| 드래그 | 이동 (확대 시) |

---

## PDF 미리보기

### 화면 구성

```
┌─────────────────────────────────┐
│  대장간 V3                   ×  │
├─────────────────────────────────┤
│  💰 16,500원 │ ✂️ 11회 │ 📦 2장 │
├─────────────────────────────────┤
│  ┌─────────────────────────┐   │
│  │                         │   │
│  │      [1페이지]          │   │
│  │                         │   │
│  └─────────────────────────┘   │
│  ┌─────────────────────────┐   │
│  │                         │   │  ← 세로 스크롤
│  │      [2페이지]          │   │
│  │                         │   │
│  └─────────────────────────┘   │
├─────────────────────────────────┤
│    [📥 저장]    [📤 공유]       │ ← 같은 행
└─────────────────────────────────┘
```

### v4 변경 사항 (PDF 미리보기)

| 항목 | v3 | v4 |
|------|----|----|
| 페이지 네비게이션 | ◀ 1/5 ▶ | **삭제 → 세로 스크롤** |
| 저장/공유 버튼 | 세로 배치 | **같은 행 (가로 배치)** |
| 버튼 위치 | 하단 | **하단 유지** |
| 핀치 줌 | ✅ | **✅ 유지** |

### PDF 저장/공유

| 버튼 | 동작 |
|------|------|
| 📥 저장 | 전체 페이지 1개 PDF로 합쳐서 저장 |
| 📤 공유 | 텍스트 요약 + 전체 페이지 PDF 첨부 |

---

## 공유하기

### 공유 내용 형식

```
[대장간 V3 재단 결과]

📐 원판: 2400 × 1220 mm
📦 사용 원판: 2장
✂️ 총 절단: 11회
💰 예상 비용: 16,500원

─────────────────
부품 목록:
• 600×800 ×2개
• 800×600 ×2개
...

📎 첨부: 재단도_2페이지.pdf
```

---

## 네비게이션

### 이동 방법

| 위치 | 동작 | 결과 |
|------|------|------|
| 어디서든 | 로고 터치 | Step 1로 이동 |
| 어디서든 | "설정" 터치 | Step 1로 이동 |
| 어디서든 | "입력" 터치 | Step 2로 이동 |
| 어디서든 | "결과" 터치 | Step 3로 이동 (결과 있을 때만) |
| Step 3 | ← 다시입력 | Step 2로 (데이터 유지) |
| Step 3 | 📄 PDF | PDF 미리보기 열림 |
| PDF 미리보기 | × 닫기 | Step 3로 복귀 |

### 데이터 유지 규칙

| 이동 | 원판 설정 | 부품 리스트 | 결과 |
|------|----------|------------|------|
| Step 2 → Step 1 | 유지 | 유지 | 삭제 |
| Step 3 → Step 2 | 유지 | 유지 | 유지 |
| Step 3 → Step 1 (새작업) | 초기화 | 초기화 | 삭제 |
| 로고 터치 | 유지 | 유지 | 유지 |

---

## 추가 UX 개선

### 빈 상태 안내

```
┌─────────────────────────────┐
│                             │
│      📦                     │
│   아직 부품이 없습니다       │
│   아래에서 추가해주세요      │
│         ↓ ↓ ↓              │
└─────────────────────────────┘
```

### 입력 유효성 체크

```
원판보다 큰 값 입력 시:
┌─────────────────────────────┐
│         2500                │  ← 빨간색
│     ⚠️ 원판(2440)보다 큼    │
└─────────────────────────────┘
```

### 스와이프 삭제

```
← 스와이프 → [삭제] 버튼 나타남
```

### 되돌리기 (Undo)

```
삭제 시 토스트: "삭제됨 [되돌리기]" (3초 후 사라짐)
```

---

## 버전 변경 이력

### v1 → v2

| 항목 | v1 | v2 |
|------|----|----|
| 개수 입력 | +/- 버튼 | 키패드 |
| 입력 자동 전환 | 가로 → 세로 | 가로 → 세로 → 개수 |
| 작은 조각 표시 | 생략됨 | 번호 + 범례 |

### v2 → v3

| 항목 | v2 | v3 |
|------|----|----|
| 결과 화면 줌 버튼 | 있음 | 제거 (핀치만) |
| 결과 화면 배경 | 검은색 | 투명 |
| PDF 미리보기 줌 | 없음 | 핀치 줌 추가 |

### v3 → v4

| 항목 | v3 | v4 |
|------|----|----|
| "2400×1220 mm" 텍스트 | 요약바 이동 | **완전 삭제** |
| 효율 % | 요약바 이동 | **완전 삭제** |
| 배치도 옆 치수 | - | **유지** |
| 요약바 | 확장 | **기존 유지** |
| 배치도 크기 | 최대화 | **최대화** |
| PDF 페이지 네비 | ◀ 1/5 ▶ | **삭제 → 세로 스크롤** |
| PDF 저장/공유 버튼 | 세로 배치 | **같은 행 (가로)** |

---

## 최종 체크리스트

| 항목 | 상태 |
|------|------|
| 가로→세로→개수 자동 전환 | ✅ |
| 키패드 축소 (3×4) | ✅ |
| +/- 버튼 제거 | ✅ |
| 부품 리스트 메인 | ✅ |
| 하단 고정 입력바 | ✅ |
| 결고려 이미지 토글 | ✅ |
| 배치도 하이브리드 표시 | ✅ |
| 범례 표시 | ✅ |
| 결과 화면 줌 버튼 제거 | ✅ |
| 결과 화면 검은 배경 제거 | ✅ |
| 결과 화면 "원판 사이즈" 텍스트 삭제 | ✅ |
| 결과 화면 "효율 %" 삭제 | ✅ |
| 결과 화면 배치도 옆 치수 유지 | ✅ |
| 결과 화면 배치도 최대화 | ✅ |
| 결과 화면 핀치 줌 | ✅ |
| PDF 미리보기 세로 스크롤 | ✅ |
| PDF 미리보기 핀치 줌 | ✅ |
| PDF 저장/공유 같은 행 | ✅ |
| PDF 저장/공유 전체 페이지 | ✅ |
